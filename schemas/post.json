{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://autogensocial.com/schemas/post.json",
  "title": "Post",
  "description": "Schema for social media post in the AutoGenSocial platform",
  "type": "object",
  "required": ["id", "brandId", "content", "platform", "status"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the post",
      "pattern": "^[a-zA-Z0-9-_]+$"
    },
    "brandId": {
      "type": "string",
      "description": "Reference to the brand this post belongs to",
      "pattern": "^[a-zA-Z0-9-_]+$"
    },
    "postPlanId": {
      "type": "string",
      "description": "Reference to the post plan (if part of a plan)",
      "pattern": "^[a-zA-Z0-9-_]+$"
    },
    "platform": {
      "type": "string",
      "enum": ["twitter", "facebook", "instagram", "linkedin", "tiktok", "youtube"],
      "description": "Target social media platform"
    },
    "status": {
      "type": "string",
      "enum": ["draft", "pending_approval", "approved", "scheduled", "published", "failed", "cancelled"],
      "description": "Current status of the post"
    },
    "content": {
      "type": "object",
      "description": "Post content",
      "required": ["text"],
      "properties": {
        "text": {
          "type": "string",
          "description": "Main text content of the post",
          "minLength": 1,
          "maxLength": 5000
        },
        "title": {
          "type": "string",
          "description": "Post title (for platforms that support it)",
          "maxLength": 300
        },
        "hashtags": {
          "type": "array",
          "description": "Hashtags to include in the post",
          "items": {
            "type": "string",
            "pattern": "^#[a-zA-Z0-9_]+$"
          }
        },
        "mentions": {
          "type": "array",
          "description": "User mentions in the post",
          "items": {
            "type": "string",
            "pattern": "^@[a-zA-Z0-9_]+$"
          }
        },
        "url": {
          "type": "string",
          "format": "uri",
          "description": "URL to include in the post"
        }
      }
    },
    "media": {
      "type": "array",
      "description": "Media attachments for the post",
      "items": {
        "type": "object",
        "required": ["type", "url"],
        "properties": {
          "type": {
            "type": "string",
            "enum": ["image", "video", "gif"],
            "description": "Type of media"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "URL of the media file"
          },
          "altText": {
            "type": "string",
            "description": "Alternative text for accessibility",
            "maxLength": 1000
          },
          "thumbnail": {
            "type": "string",
            "format": "uri",
            "description": "Thumbnail URL for videos"
          },
          "width": {
            "type": "integer",
            "description": "Width in pixels"
          },
          "height": {
            "type": "integer",
            "description": "Height in pixels"
          }
        }
      }
    },
    "scheduling": {
      "type": "object",
      "description": "Post scheduling information",
      "properties": {
        "scheduledAt": {
          "type": "string",
          "format": "date-time",
          "description": "When the post is scheduled to be published"
        },
        "publishedAt": {
          "type": "string",
          "format": "date-time",
          "description": "When the post was actually published"
        },
        "timezone": {
          "type": "string",
          "description": "Timezone for scheduling (IANA format)",
          "default": "UTC"
        }
      }
    },
    "engagement": {
      "type": "object",
      "description": "Post engagement metrics",
      "properties": {
        "likes": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of likes/reactions"
        },
        "comments": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of comments"
        },
        "shares": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of shares/retweets"
        },
        "impressions": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of impressions/views"
        },
        "clicks": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of link clicks"
        },
        "engagementRate": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "Engagement rate percentage"
        }
      }
    },
    "platformSpecific": {
      "type": "object",
      "description": "Platform-specific metadata",
      "properties": {
        "postId": {
          "type": "string",
          "description": "Platform-specific post ID after publishing"
        },
        "permalink": {
          "type": "string",
          "format": "uri",
          "description": "Permanent link to the published post"
        },
        "threadId": {
          "type": "string",
          "description": "Thread ID (for threaded posts)"
        },
        "parentPostId": {
          "type": "string",
          "description": "Parent post ID (for replies)"
        }
      }
    },
    "approval": {
      "type": "object",
      "description": "Approval workflow information",
      "properties": {
        "required": {
          "type": "boolean",
          "description": "Whether approval is required",
          "default": false
        },
        "approvedBy": {
          "type": "string",
          "description": "User ID of the approver"
        },
        "approvedAt": {
          "type": "string",
          "format": "date-time",
          "description": "When the post was approved"
        },
        "rejectedBy": {
          "type": "string",
          "description": "User ID who rejected the post"
        },
        "rejectedAt": {
          "type": "string",
          "format": "date-time",
          "description": "When the post was rejected"
        },
        "rejectionReason": {
          "type": "string",
          "description": "Reason for rejection",
          "maxLength": 500
        }
      }
    },
    "aiGenerated": {
      "type": "object",
      "description": "AI generation metadata",
      "properties": {
        "isGenerated": {
          "type": "boolean",
          "description": "Whether content was AI-generated",
          "default": false
        },
        "model": {
          "type": "string",
          "description": "AI model used for generation"
        },
        "prompt": {
          "type": "string",
          "description": "Prompt used for generation",
          "maxLength": 2000
        },
        "generatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "When the content was generated"
        }
      }
    },
    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp when the post was created"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp when the post was last updated"
    },
    "createdBy": {
      "type": "string",
      "description": "User ID of the post creator"
    },
    "tags": {
      "type": "array",
      "description": "Custom tags for organization and filtering",
      "items": {
        "type": "string",
        "maxLength": 50
      }
    }
  }
}
